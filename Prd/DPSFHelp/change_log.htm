<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- saved from url=(0029)http://www.helpandmanual.com/ -->
<head>
   <title>Change Log</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
<script type="text/javascript" src="helpman_topicinit.js"></script>
<!-- Redirect browser to frame page if page is not in the content frame. -->
<script type="text/javascript">
<!--
if (location.search.lastIndexOf("toc=0")<=0) {
  if (parent.frames.length==0) { parent.location.href="index.html?change_log.htm"; }
  else { parent.quicksync('a1.5'); }
}
//-->
</script>
<script type="text/javascript" src="highlight.js"></script></head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;" onload="highlight();">
<div id="hmpopupDiv" style="visibility:hidden; position:absolute; z-index:1000; "></div>


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#D0D0D0">
  <tr valign="middle">
    <td align="left">
      <p class="p_Heading1"><span class="f_Heading1">Change Log</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="introduction.htm">Top</a>&nbsp;
     <a href="requirements.htm">Previous</a>&nbsp;
     <a href="license_(eula).htm">Next</a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p><span style="font-weight: bold;">Version 2.3.0</span></p>
<p>- Fixed bug in Sprite Particle System Templates and Sprite particle systems where they wouldn't use the SpriteBatch passed into the AutoInitialize() function.</p>
<p>- Added new ExplosionDebrisSpriteParticleSystem class, that shows the implementation differences between a 3D and 2D Sprite Particle System.</p>
<p>- Exposed the SpriteBatch object on the particle systems so that it can be retrieved.</p>
<p>- Added TotalNumberOfActiveParticles, TotalNumberOfParticlesAllocatedInMemory, and TotalNumberOfParticlesBeingDrawn virtual properties that can be overridden to return back more accurate numbers for particle systems that contain other particles systems.</p>
<p>- Refactored the DPSF Demo particle systems into wrapper classes that implement the new IWrapDPSFDemoParticleSystems interface to make it easier to add new DPSF Demo particle systems and clean up the GameMain.cs file so it is easier to understand.</p>
<p>- Refactored the DPSF Demo a lot, breaking the 5000+ line file into several smaller files and creating more reusable components (e.g. input managers, camera, DemoBase.cs). Created stand-alone BasicVirtualEnvironment project that houses all of these reusable components.</p>
<p>- Moved functionality to Linearly Interpolate (Lerp) the Emitter's position and orientation from the Update() function into new AddParticles() functions, so users can now &nbsp; &nbsp; &nbsp; &nbsp;have their particle's Lerp'd when manually adding particles without the emitter.</p>
<p>- Changed DPSF to throw custom DPSF Exceptions to make them easy to distinguish from other exceptions thrown by a users application.</p>
<p>- Added an Emitters collection to the particle systems, and the Emitter variable now always simply points to one of the emitters in the collection. This allows for particle systems to easily use multiple emitters.</p>
<p>- Added new MultipleEmittersParticleSystem particle system class that shows how to use multiple emitters in a particle system class.</p>
<p>- Added a NumberOfParticlesEmitted property to the Emitter class that keeps track of how many particles an individual emitter has added to a particle system.</p>
<p>- Updated documentation on some of the old tutorials and Optimizations section a bit.</p>
<p>- Added initial support for "Mono for Android" with a new DLL file (still working some bugs out though).</p>
<p>- Fixed bugs to make particle system properly serialize and deserialize.</p>
<p>- Added feature to skip the splash screen (by default) when debugging so developers don't have to see it every time they run their app.</p>
<p>&nbsp;</p>
<p>Possible Breaking Changes (see <a href="dpsf_2_2_2_to_2_3_0.htm">Updating Your Existing Particle Systems To Newer Versions of DPSF - 2.2.2 to 2.3.0</a> section for solutions):</p>
<p>- Removed the mcRandomNumber particle system class variable. Everything should now just use the RandomNumber public property.</p>
<p>- Changed namespace of particle systems in the DPSF Demo from DPSF.ParticleSystems to DPSF_Demo.ParticleSystems.</p>
<p>- Moved the LerpEmittersPositionAndOrientation and LerpEmittersPositionAndOrientationOnNextUpdate properties from the particle system into the ParticleEmitter class, so that this can be configured for each emitter individually.</p>
<p>- Changed the MagnetList property from a LinkedList&lt;DefaultParticleSystemMagnet&gt; to a List&lt;DefaultParticleSystemMagnet&gt;.</p>
<p>- Changed IDPSFParticleVertex to implement Microsoft.XNA.Framework.Graphics.IVertexType and removed the old IDPSFParticleVertex enforcements.</p>
<p>- Changed the DPSF Splash Screen particle system class to be in the DPSF.SplashScreen namespace.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 2.2.2</span></p>
<p>- Changed EULA to make using the DPSF Splash Screen optional. &nbsp;Now as long as DPSF is mentioned somewhere in the application (not necessarily through a splash screen) that is acceptable.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 2.2.1</span></p>
<p>- Fixed bug with accepting input during the splash screen which resulted in a null ref exception.</p>
<p>- Now allow user input to skip the splash screen in the Windows Phone DPSF Demo.</p>
<p>- Fixed the DPSF Demo feature to not clear the screen every frame (F5).</p>
<p>- Fixed the DPSF Demo feature to draw static particles (F6).</p>
<p>- Fixed the DPSF Demo feature to create animated gifs and tilesets from particle systems (F8).</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 2.2.0</span></p>
<p>- Changed all particle systems to use the built-in XNA 4 effects by default, rather than the DPSFDefaultEffect, so they are all now Reach compatible (i.e. Windows Phone 7 compatible).</p>
<p>- Substantial improvement to the performance of Quad particle systems, so it is very comparable with the Sprite3DBillboard particle systems now.</p>
<p>- Changed default Sampler State to LinearClamp, as PointClamp was causing aliasing problems with new effect types.</p>
<p>- Updated the DPSF Splash Screen to make it Reach compatible.</p>
<p>- Fixed bug in Particle System Manager where exception would be thrown by the manager if a particle system removed itself from the manager from within its Update() function.</p>
<p>- Fixed bug where Emitters would still emit particles when their Enabled property was set to false.</p>
<p>- Since we now use the built-in XNA 4 effects by default, added a ColorAsPremultiplied property to the particle base class, since the built-in effects expect premultiplied colors.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 2.1.0</span></p>
<p>- Made DPSF compatible with the Reach profile configuration.</p>
<p>- Added new Sprite 3D Billboard particle system type which can be up to 50% faster than using billboarded Textured Quads.</p>
<p>- Converted most particle systems over to use the new Sprite 3D Billboard particle systems.</p>
<p>- Changed particle system's IsInitialized() function into IsInitialized boolean property.</p>
<p>- Fixed bug where particles wouldn't linearly interpolate (Lerp) between the emitter's previous and current position and orientation when it was moved manually (i.e. not with it's own acceleration/velocity properties).</p>
<p>- Added particle system properties LerpEmittersPositionAndOrientation and LerpEmittersPositionAndOrientationOnNextUpdate to control emitter Lerping.</p>
<p>- Added static DPSFDefaultSettings class to be used to set the default values to use for all DPSF particle systems when they are initialized.</p>
<p>- Added CopyFrom() function and Copy constructor to Emitter and AutoMemoryManagerSettings classes.</p>
<p>- Fixed bug in ParticleSystemManager's CopyFrom() function.</p>
<p>- Added PerformanceProfiling variables to the DPSF particle system class and Particle System Manager class that allow you to see how long it takes to perform an Update() or Draw() function call.</p>
<p>- Added new Trail, FireSprite, and MultipleParticleImagesSprite particle systems, and added templates for the Sprite 3D Billboard particle systems as well.</p>
<p>- Changed default SpriteSortMode from FrontToBack to Deferred.</p>
<p>- Fixed bug to treat the SpriteSortMode.Immediate mode like the other modes, since XNA 4 now supports using effects with any of the Sprite Sort Modes.</p>
<p>- Added FPSUpdated event to the static FPS class that fires every second after the FPS has been updated.</p>
<p>- Added ability to view performance stats in the DPSF Demo by pressing the F10 key.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 2.0.1</span></p>
<p>- Fixed bug causing incompatible render settings run-time errors to be thrown.</p>
<p>- Added logic to more properly handle drawing too many particles on the Xbox 360, instead of throwing an exception.</p>
<p>- Fixed bug in DPSF Demo where it was still checking to make sure XNA 3.1 was installed and throwing an error if it wasn't.</p>
<p>- Gave assemblies a strong name.</p>
<p>- Added performance optimizations.</p>
<p>- Made DSPFDefaultEffect strongly typed, rather than just a generic Effect.</p>
<p>- Added virtual function SetCameraPosition() that may be overridden when not inheriting from the default DPSF particle system classes and will still work with the ParticleSystemManager.SetCameraPositionForAllParticleSystems() function.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 2.0.0.0</span></p>
<p>- Made DPSF compatible with XNA GameStudio 4.0, including the Windows Phone 7 (using a 2D Sprite particle system only for now).</p>
<p>- Removed Pixel and Point Sprite particle system types, as they are no longer supported in XNA 4.0. You will need to convert any existing PointSpriteParticleSystem classes to be TexturedQuadParticleSystem classes, and add the EverytimeEvent "UpdateParticleToFaceTheCamera" to the particle system.</p>
<p>- Added WorldViewProjection property to return the result of multiplying the World, View, and Projection matrices.</p>
<p>- Sprite particle systems no longer default to using the custom DPSF effect (this allows it to run on the Windows Phone 7 without any changes). The custom DPSF effect can still be applied though by calling the function "SetEffectAndTechnique(DPSFDefaultEffect, DPSFDefaultEffectTechniques.Sprites.ToString());".</p>
<p>- Removed the InitializeRenderState() and ResetRenderState() virtual functions and replaced them with an InitializeRenderProperties() virtual function.</p>
<p>- Added DistanceFromCameraSquared property to all of the Quad particles.</p>
<p>- Added ParticleEvent "UpdateParticleDistanceFromCameraSquared" and ParticleSystemEvent "UpdateParticleSystemToSortParticlesByDistanceFromCamera" to sort particles based on their distance from the camera. These must be used if drawing textures with opaque and semi-transparent portions, where you don't want further away particles to be drawn overtop of closer particles.</p>
<p>- Wrapped all [Serializable] attributes in "if (WINDOWS)" conditional compilation statements, as binary serialization is not supported on the Xbox or Windows Phone.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.5.4.0</span></p>
<p>- Changed install directory to be "DPSF (XNA 3.1)", rather than "DPSF" so that XNA 4 DPSF version can install to "DPSF".</p>
<p>- Fixed minor memory leak in the Particle System Manager when removing particle systems.</p>
<p>- SpriteBatchSettings now throws exception if trying to access it when not using a Sprite particle system.</p>
<p>- Added SpriteBatch parameter to the InitializeSpriteParticleSystem() functions to allow users to draw particle systems using their own SpriteBatches, instead of every particle system using its own. Also included a new UsingExternalSpriteBatchToDrawParticles property that tells at run-time if the particle system uses its own SpriteBatch or not.</p>
<p>- Added SpriteBatch parameter to the AutoInitialize() function to easily pass in an external Sprite Batch to use to draw Sprite particle systems.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.5.3.0</span></p>
<p><span style="font-weight: bold;">- </span>Fixed bug in Quad and Textured Quad particle systems where the texture was being drawn in reverse (upside down and mirrored).</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.5.2.0</span></p>
<p>- Fixed enormous amount of garbage being created when using a Sprite type particle system, causing the garbage collector to run very often.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.5.1.0</span></p>
<p>- Added SourceToTargetVector() and SourceToTargetDirection() functions to DPSFHelper.</p>
<p>- Added SetCameraPositionForAllParticleSystems() function to the Particle System Manager class.</p>
<p>- Reduced memory footprint of the Draw() function.</p>
<p>- Fixed exceptions that would be thrown when a particle system Destroyed itself.</p>
<p>- Added Particle Update functions to the Quad particle systems to constrain a particle around a specific axis (i.e. X, Y, or Z).</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.5.0.0</span></p>
<p>- Added check to make sure .NET Framework 3.5 or greater and XNA 3.1 are installed on the client's machine before running the DPSF Demo, and now displays a nice warning message if they are not installed.</p>
<p>- Catch and throw new exception when calling SetTexture() in the case that the texture you are loading has already been Dispose()'d.</p>
<p>- Fixed bug in Default Quad particle systems where particles with a size less than 2 would not be displayed.</p>
<p>- Now throw descriptive exceptions when properties try to be used before the particle system has been initialized.</p>
<p>- Added Size, StartSize, and EndSize properties to the Default Sprite and Quad Particles, which simply set the Width and Height properties.</p>
<p>- Updated help documentation a bit.</p>
<p>- Plastered the [Serializable] attribute everywhere to make DPSF serializable.</p>
<p>- Now throw more descriptive exceptions from the Particle System Manager class.</p>
<p>- Added DPSFDefaultEffectTechniques enumeration which specifies all of the available Techniques for the DPSFDefaultEffect.</p>
<p>- Added extra functions to the default particles.</p>
<p>- Fixed bug in ParticleSystemManager.RemoveAllParticleSystems() function that would cause an invalid index exception to be thrown.</p>
<p>- Fixed bug in ParticleSystemManager.DrawAllParticleSystems() function to draw particle systems in the correct order.</p>
<p>- Made all Particle and ParticleSystem Update Functions protected instead of public to promote particle system encapsulation and removed extra exposed functions that should not be used from users.</p>
<p>- Added explosion particle systems to the DPSF Demo.</p>
<p>- Included the DPSFDefaults.cs file used by DPSF for others to modify if wanted and to learn from.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.4.0.0</span></p>
<p>- Added a FPSLogger class to the FPS.cs file included in the DPSF Demo project. This allows the FPS to be logged to a file.</p>
<p>- Added overloaded Initialize...ParticleSystem() functions to allow a Texture2D to be specified instead of a texture asset name string.</p>
<p>- Changed the Magnets class, adding MagnetPoint, MagnetLine, MagnetLineSegment, and MagnetPlane classes.</p>
<p>- Added tutorial source code showing how to use magnets (magnet tutorial document not available yet though).</p>
<p>- Added DefaultSpriteTextureCoordinatesParticleSystem and DefaultTexturedQuadTextureCoordinatesParticleSystem classes for when texture coordinates are required (not for animated particles), as well as the associated Particle classes and Particle Vertex structs.</p>
<p>- Added DefaultPointSpriteTextureCoordinatesParticleSystem, DefaultPointSpriteTextureCoordinatesNoRotationParticleSystem, and DefaultPointSpriteTextureCoordinatesNoColorParticleSystem classes, as well as associated Particle classes, Particle Vertex structs, and Effect file techniques. &nbsp;Three classes are provided because the the NoRotation and NoColor classes run considerably faster than the DefaultPointSpriteTextureCoordinatesParticleSystem, as extra operations must be performed in the shaders to support both Color and Rotation when also using Texture Coordinates for Point Sprites. So if Texture Coordinates are required, but not both Color (including transparency) and Rotation, it is better to use the corresponding NoRotation or NoColor particle system classes.</p>
<p>- Added DefaultAnimatedPointSpriteParticleSystem, DefaultAnimatedPointSpriteNoRotationParticleSystem, and DefaultAnimatedPointSpriteNoColorParticleSystem classes, as well as associated Particle classes and Particle Vertex structs.</p>
<p>- Added MultipleParticleImagePS particle system to DPSF demo to show how one particle system can be used to display many different particle images.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.3.1.0</span></p>
<p>- Updated to be compatible with XNA Game Studio 3.1</p>
<p>- Added inner exception output to exceptions thrown when initializing particle systems.</p>
<p>- Changed the SherePS particle system to use the Particle texture.</p>
<p>- Fixed formula for calculating the row, column, and layer a particle is at in the Grid particle systems.</p>
<p>- Now throws an exception when trying to Draw on the XBox 360 with a vertex buffer that is too large.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.3.0.0</span></p>
<p>- Fixed bug in DPSFHelper.RandomNormalizedVector() function where it only returned positive vectors.</p>
<p>- Renamed Emitter.EmitParticles property to Emitter.EmitParticlesAutomatically.</p>
<p>- Added Emitter.Enabled property.</p>
<p>- Added Emitter.BurstParticles and Emitter.BurstTime properties to release particles in bursts.</p>
<p>- Renamed UpdateParticleSystemTurnEmitterOn/Off() functions to UpdateParticleSystemEmitParticlesAutomaticallyOn/Off().</p>
<p>- Added UpdateParticleSystemEnableEmitter() and UpdateParticleSystemDisableEmitter() particle system update functions to the Default classes.</p>
<p>- Fixed bug where an "index out of range" exception would be thrown when removing Events from within an Event function.</p>
<p>- Renamed MultipleChangeParticleSystem.cs to SquarePatternParticleSystem.cs and changed some of its functions.</p>
<p>- Formatted a lot of the XML documentation better.</p>
<p>- Fixed bug in DPSFDefaultEffect.fx which caused Point Sprites to be displayed smaller when their rotation was zero.</p>
<p>- Created first 5 tutorials in the Help Documentation.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.2.0.0</span></p>
<p>- Changed what happens a little bit when a particle is in the exact same position as a magnet affecting it, so now the particle is only pushed in a random direction if the magnet is repelling it (not attracting it).</p>
<p>- Renamed the DefaultParticleSystemMagnet.DistanceFunctions enumeration's value "SameForceAtAllDistances" to "Constant".</p>
<p>- Added Grid particle system to Demo.</p>
<p>- Added Sphere particle system to Demo.</p>
<p>- Fixed bug where exception would be thrown when reducing the NumberOfParticlesAllocatedInMemory to less than what was currently in the particle system already.</p>
<p>- Added global variable miPARTICLE_SYSTEM_UPDATES_PER_SECOND to GameMain.cs to control how often the particle systems are updated.</p>
<p>- Fixed bug in the ParticleSystemManager.AutoInitializeAllParticleSystems() function where not all Particle Systems were being initialized.</p>
<p>- Added DPSFHelper.RandomNumberBetween(fValue1, fValue2) function for returning random numbers in a given range.</p>
<p>- Fixed bug to in the Default Point Sprite and Quad Particle System classes and Templates to reset the RenderState's AlphaBlendEnable and AlphaTestEnable properties to false after Draw() is called.</p>
<p>- Added SimulationSpeed and UpdatesPerSecond properties to the individual particle systems, and changing the Particle System Manager's SimulationSpeed / UpdatesPerSecond now sets the individual particle systems' properties.</p>
<p>- Changed the SimulationSpeed and UpdatesPerSecond properties to work the same when inheriting from DrawableGameComponent or not.</p>
<p>- Added ParticleSystemManagerToCopyPropertiesFrom property to the particle systems (Copies SimulationSpeed and UpdatesPerSecond).</p>
<p>- Added a NoDisplay Particle Type that can offer better performance for particle systems that do not need to be visualized (i.e. drawn to the screen), such as for some research applications or when using a DPSF Particle System as an internal data structure.</p>
<p>- Added a RandomNumbers class that inherits the Random class and adds more functionality.</p>
<p>- Replaced the PointOnVertical/HorizontalCircle() functions in DPSFHelper with more generic PointOnSphere() functions.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.1.1.0</span></p>
<p>- Fixed bug where a particle would be given an invalid position when it was in the exact same position as a magnet affecting it.</p>
<p>- Added global boolean values to GameMain.cs to turn building an Animated GIF and a Tile Set Image on/off when building images from an animation.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.1.0.0</span></p>
<p>- Added the SpriteBatchSettings and AutoMemoryManagerSettings properties to the IDPSFParticleSystem interface so they are more accessible.</p>
<p>- Added the ability to set all of the Sprite particle systems' Transformation Matrix property from the Particle System Manager.</p>
<p>- When multiple particles are added within the same frame, their Elapsed Time's are linearly interpolated so that it appears that the particles were added smoothly between frames.</p>
<p>- Added Sparkler particle system.</p>
<p>- Changed default installation path from C:\Program Files\DPSF to C:\DPSF.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.0.1.1</span></p>
<p>- Renamed the DPSFParticle classes function name from UpdateAutomaticVariables() to UpdateElapsedTimeVariables().</p>
<p>- Renamed the default vertex update function from UpdateParticleVertex() to UpdateVertexProperties().</p>
<p>- Renamed the DPSFParticle classes virtual function name from CopyFromParticle() to CopyFrom().</p>
<p>- Updated DPSF Demo to place the text in a different position so that it is visible on the Xbox 360.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.0.1.0</span></p>
<p>- Fixed display issues with Sprites and Textured Quads on the Xbox 360 when using the DPSF Default Effect.</p>
<p>- Removed OldPosition and OldOrientation variables from the ParticleEmitter class, as they were unnecessary.</p>
<p>- Updated the DPSF Demo and installer to include a .sln file, which can be run on Windows and the Xbox 360.</p>
<p>&nbsp;</p>
<p><span style="font-weight: bold;">Version 1.0.0.0</span></p>
<p>- This is the first official release of DPSF.</p>
<p>&nbsp;</p>

</td></tr></table>

</body>
</html>
